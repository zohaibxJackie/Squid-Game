<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="./Assets/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./Assets/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./Assets/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="./Assets/favicon_io/site.webmanifest">
    <title>Red light, Green light - Multiplayer</title>
    <link rel="stylesheet" href="./stylesheets/style.css">
    <link rel="stylesheet" href="./stylesheets/multiplayerStyles.css">
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <div class="wrapper">
        <div id="lobbyModal" class="modal">
            <div class="modal-content lobby-content">
                <h2>Red Light, Green Light</h2>
                <p class="subtitle">Multiplayer Edition</p>
                
                <div id="nameInputSection">
                    <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="12">
                    <div class="lobby-buttons">
                        <button id="createRoomBtn" class="lobby-btn create-btn">Create Room</button>
                        <button id="showJoinBtn" class="lobby-btn join-btn">Join Room</button>
                    </div>
                </div>

                <div id="joinRoomSection" style="display: none;">
                    <input type="text" id="roomCodeInput" placeholder="Enter Room Code" maxlength="6">
                    <div class="lobby-buttons">
                        <button id="joinRoomBtn" class="lobby-btn join-btn">Join</button>
                        <button id="backBtn" class="lobby-btn back-btn">Back</button>
                    </div>
                </div>

                <p id="lobbyError" class="error-text"></p>
            </div>
        </div>

        <div id="waitingRoom" class="modal" style="display: none;">
            <div class="modal-content waiting-content">
                <h2>Waiting Room</h2>
                <p class="room-code">Room Code: <span id="displayRoomCode"></span></p>
                <div id="playersList" class="players-list"></div>
                <div id="difficultySection" class="difficulty-section" style="display: none;">
                    <p class="difficulty-label">Difficulty:</p>
                    <div class="difficulty-buttons">
                        <button class="difficulty-btn" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn active" data-difficulty="normal">Normal</button>
                        <button class="difficulty-btn" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn" data-difficulty="insane">Insane</button>
                    </div>
                </div>
                <p id="difficultyDisplay" class="difficulty-display" style="display: none;">Difficulty: <span id="currentDifficulty">Normal</span></p>
                
                <div class="voice-chat-section">
                    <button id="voiceChatBtn" class="lobby-btn voice-btn">Voice Chat</button>
                    <span id="voiceChatStatus" class="voice-status">Voice: OFF</span>
                </div>
                
                <button id="startGameBtn" class="lobby-btn start-btn" style="display: none;">Start Game</button>
                <p class="waiting-text" id="waitingText">Waiting for host to start...</p>
                <button id="leaveRoomBtn" class="lobby-btn leave-btn">Leave Room</button>
            </div>
        </div>

        <div id="gameRulesModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>Welcome Player <br> Game Rules: Red Light, Green Light</h2>
                <ul>
                    <li><strong>Objective:</strong> Reach the finish line before the timer runs out to win the game.
                    </li>
                    <li>
                        <strong>How to Play:</strong>
                        <ul>
                            <li>Press the <strong>START</strong> button to move the player forward.</li>
                            <li>Press the <strong>STOP</strong> button to stop the player.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>The Doll's Movements:</strong>
                        <ul>
                            <li>When the doll is facing <strong>back</strong> (green light), you are safe to move.</li>
                            <li>When the doll is facing <strong>front</strong> (red light), you must <strong>STOP
                                    immediately</strong>.</li>
                        </ul>
                    </li>
                    <li><strong>Game Over Conditions:</strong></li>
                    <ul>
                        <li>If you are moving while the doll is watching (red light), you will be
                            <strong>eliminated</strong>.
                        </li>
                        <li>If the timer runs out before you reach the finish line, you lose.</li>
                    </ul>
                    <li><strong>Winning Condition:</strong> Reach the finish line without being eliminated, and within
                        the given time, to win the game.</li>
                    <li>
                        <strong>Tips:</strong>
                        <ul>
                            <li>Be quick but cautious.</li>
                            <li>Pay attention to the doll's movements and stop immediately when it turns to face you.
                            </li>
                        </ul>
                    </li>
                </ul>
                <button id="startGameButton">Start Game</button>
            </div>
        </div>

        <div id="eliminationPopup" class="popup">
            <div class="popup-content">
                <h2>You've Been Eliminated!</h2>
                <p>Watch the others finish...</p>
            </div>
        </div>

        <div id="winPopup">
            <div class="win-popup-content">
                <h2>Congratulations!</h2>
                <p>You crossed the finish line!</p>
            </div>
        </div>

        <div id="gameEndPopup" class="popup" style="display: none;">
            <div class="popup-content game-end-content">
                <h2 id="gameEndTitle">Game Over</h2>
                <div id="gameEndMessage"></div>
                <div class="popup-btns">
                <button id="playAgainBtn" class="lobby-btn" style="display: none;">Play Again</button>
                <button id="backToLobbyBtn" class="lobby-btn">Leave Game</button>
                </div>
            </div>
        </div>

        <div class="clock" style="display: none;">
            <p class="time">00 : <span id="countdown">40</span>s</p>
        </div>

        <div class="playground" style="display: none;">
            <img src="./Assets/background .png" alt="background image" id="playground-img">
            <div id="playersContainer"></div>
        </div>

        <div class="controllers" style="display: none;">
            <div id="doll">
                <img src="./Assets/doll front.png" alt="doll" id="dollImage">
            </div>
            <button id="moveButton"><span>START</span></button>
        </div>
    </div>

    <script src="./scripts/main.js"></script>
</body>

</html>
